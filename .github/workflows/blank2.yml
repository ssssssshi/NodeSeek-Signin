name: nodeseekå¤šè´¦å·ç­¾åˆ°

on:
  push:
    branches:
      - main
  schedule:
    - cron: '00 16 * * *'  # æ¯å¤©åŒ—äº¬æ—¶é—´ 00:00 æ‰§è¡Œï¼ˆUTC+8ï¼‰
  workflow_dispatch:

jobs:
  run-nodeseek-sign:
    runs-on: ubuntu-latest

    steps:
      - name: æ£€å‡ºä»£ç ä»“åº“
        uses: actions/checkout@v3

      - name: è®¾ç½® Python ç¯å¢ƒ
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'

      - name: å®‰è£…ä¾èµ–
        run: pip install curl_cffi requests

      - name: æ‰“å°è°ƒè¯•ä¿¡æ¯ï¼ˆç¡®è®¤ç¯å¢ƒå˜é‡æ˜¯å¦ä¼ å…¥ï¼‰
        run: |
          echo "ğŸ” USER_1=$USER_1"
          echo "ğŸ” PASS_1=$PASS_1"
          echo "ğŸ” NS_COOKIE_1=$NS_COOKIE_1"
          echo "ğŸ” USER_2=$USER_2"
          echo "ğŸ” PASS_2=$PASS_2"
          echo "ğŸ” NS_COOKIE_2=$NS_COOKIE_2"
        env:
          USER_1: ${{ secrets.USER }}
          PASS_1: ${{ secrets.PASS }}
          NS_COOKIE_1: ${{ vars.NS_COOKIE }}
          USER_2: ${{ secrets.USER1 }}
          PASS_2: ${{ secrets.PASS }}
          NS_COOKIE_2: ${{ vars.NS_COOKIE1 }}


      - name: æ‰§è¡Œç­¾åˆ°è„šæœ¬
        env:
          GH_PAT: ${{ secrets.GH_PAT }}  # Personal Access Tokenï¼Œéœ€æœ‰ repo å’Œ actions æƒé™
          GITHUB_REPOSITORY: ${{ github.repository }}

          SOLVER_TYPE: ${{ secrets.SOLVER_TYPE }}
          API_BASE_URL: ${{ secrets.API_BASE_URL }}
          CLIENTT_KEY: ${{ secrets.CLIENTT_KEY }}

          # å¤šè´¦å·æ”¯æŒï¼ˆç¤ºä¾‹ä¸¤ä¸ªè´¦å·ï¼Œå¯ç»§ç»­æ‹“å±•ï¼‰
          USER_1: ${{ secrets.USER }}
          PASS_1: ${{ secrets.PASS }}
          NS_COOKIE_1: ${{ vars.NS_COOKIE }}

          USER_2: ${{ secrets.USER1 }}
          PASS_2: ${{ secrets.PASS }}
          NS_COOKIE_2: ${{ vars.NS_COOKIE1 }}


        run: python nodeseek_sign.py
